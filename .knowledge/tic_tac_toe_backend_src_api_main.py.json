{"is_source_file": true, "format": "Python", "description": "Main backend source file for the multiplayer tic-tac-toe game using FastAPI. Contains API endpoints for user authentication, game management, move handling, real-time websocket updates, and database models with SQLAlchemy.", "external_files": ["fastapi", "sqlalchemy", "passlib", "pydantic", "secrets", "os", "datetime"], "external_methods": ["FastAPI()", "create_engine()", "sessionmaker()", "Base.metadata.create_all()", "Depends()", "HTTPException()", "secrets.token_urlsafe()", "datetime.utcnow()", "websocket.accept()", "websocket.receive_text()", "websocket.send_json()", "websocket.close()"], "published": ["app", "get_db", "register", "login", "logout", "get_me", "start_game", "join_game", "list_games", "game_detail", "make_move", "move_history", "get_game_state", "health_check", "websocket_game_endpoint"], "classes": [{"name": "ConnectionManager", "description": "Manages WebSocket connections for real-time game updates across multiple clients."}, {"name": "User", "description": "SQLAlchemy model representing a user account."}, {"name": "Session", "description": "SQLAlchemy model representing user login sessions."}, {"name": "Game", "description": "SQLAlchemy model representing a TicTacToe game with associated players and state."}, {"name": "Move", "description": "SQLAlchemy model representing a move made within a game."}], "methods": [{"name": "List[Optional[str]] get_board_state(moves: List[Move])", "description": "Generates the current game board as a list based on move history.", "scope": "", "scopeKind": ""}, {"name": "check_win(board: List[Optional[str]])", "description": "Determines if there's a winner or a draw based on the board state.", "scope": "", "scopeKind": ""}, {"name": "player_marker(game: Game, user: User)", "description": "Returns 'X' or 'O' depending on which player the user is in a game.", "scope": "", "scopeKind": ""}, {"name": "broadcast_move_update(game_id: int, db: OrmSession)", "description": "Sends WebSocket messages to clients to update game state after a move.", "scope": "", "scopeKind": ""}, {"name": "__init__(self)", "scope": "ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "broadcast(self, game_id: int, message: dict)", "scope": "ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "connect(self, game_id: int, websocket: WebSocket)", "scope": "ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "create_session(user_id: int, db: OrmSession, expire_minutes=120)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "disconnect(self, game_id: int, websocket: WebSocket)", "scope": "ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "game_detail( game_id: int, db: OrmSession = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_db()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_game_state( game_id: int, db: OrmSession = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_me( db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_password_hash(password)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_user_from_session_token( db: OrmSession, session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "join_game( join_req: JoinGameIn, db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_games( only_open: Optional[bool] = False, only_mine: Optional[bool] = False, db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "login( form_data: OAuth2PasswordRequestForm = Depends(), response: Response = None, db: OrmSession = Depends(get_db) )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logout( db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), response: Response = None, )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "make_move( game_id: int, move: MoveIn, db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "make_move_and_notify( game_id: int, move: MoveIn, background_tasks: BackgroundTasks, db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "move_history( game_id: int, db: OrmSession = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "register(user: UserCreate, db: OrmSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "start_game( db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "verify_password(plain, hashed)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["FastAPI()", "create_engine()", "sessionmaker()", "Base.metadata.create_all()", "db.query()", "db.add()", "db.commit()", "db.refresh()", "websocket.accept()", "websocket.receive_text()", "websocket.send_json()", "secrets.token_urlsafe()", "datetime.utcnow()", "app.on_event()"], "search-terms": ["tic_tac_toe_backend", "FastAPI", "SQLAlchemy models", "WebSocket game updates", "game move endpoint", "session management", "user registration login", "game state management", "move validation", "real-time notifications"], "state": 2, "file_id": 1, "knowledge_revision": 26, "git_revision": "285a826207da0c481fcaa24a4eb05a13bbdcc1e2", "revision_history": [{"17": "681644b1b901ded7754530409cf61766de4803c4"}, {"22": "681644b1b901ded7754530409cf61766de4803c4"}, {"25": "285a826207da0c481fcaa24a4eb05a13bbdcc1e2"}, {"26": "285a826207da0c481fcaa24a4eb05a13bbdcc1e2"}], "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "GameOut", "scopeKind": "class"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "MoveOut", "scopeKind": "class"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "UserOut", "scopeKind": "class"}, {"_type": "tag", "name": "ConnectionManager", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class ConnectionManager:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^DATABASE_URL = os.getenv(\"DATABASE_URL\", \"sqlite:\\/\\/\\/.\\/test.db\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Game", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class Game(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GameCreate", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class GameCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GameDetail", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class GameDetail(GameOut):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GameOut", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class GameOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JoinGameIn", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class JoinGameIn(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Move", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class Move(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MoveIn", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class MoveIn(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MoveOut", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class MoveOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MoveResultOut", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class MoveResultOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OrmSession", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    Session as OrmSession,$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Session"}, {"_type": "tag", "name": "Session", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class Session(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SessionOut", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class SessionOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserBase", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class UserBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserCreate", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class UserCreate(UserBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserOut", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^class UserOut(UserBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"games\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"moves\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"sessions\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Session", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "broadcast", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    async def broadcast(self, game_id: int, message: dict):$/", "language": "Python", "kind": "member", "signature": "(self, game_id: int, message: dict)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "broadcast_move_update", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^async def broadcast_move_update(game_id: int, db: OrmSession):$/", "language": "Python", "kind": "function", "signature": "(game_id: int, db: OrmSession)"}, {"_type": "tag", "name": "check_win", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def check_win(board: List[Optional[str]]):$/", "language": "Python", "kind": "function", "signature": "(board: List[Optional[str]])"}, {"_type": "tag", "name": "connect", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    async def connect(self, game_id: int, websocket: WebSocket):$/", "language": "Python", "kind": "member", "signature": "(self, game_id: int, websocket: WebSocket)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "create_session", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def create_session(user_id: int, db: OrmSession, expire_minutes=120):$/", "language": "Python", "kind": "function", "signature": "(user_id: int, db: OrmSession, expire_minutes=120)"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    created_at = Column(DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    created_at = Column(DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Session", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    created_at = Column(DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "current_turn", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    current_turn = Column(CHAR(1), nullable=False)  # 'X' or 'O'$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "disconnect", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    def disconnect(self, game_id: int, websocket: WebSocket):$/", "language": "Python", "kind": "member", "signature": "(self, game_id: int, websocket: WebSocket)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^engine = create_engine($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    expires_at = Column(DateTime, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "Session", "scopeKind": "class"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    expires_at: Optional[datetime] = None$/", "language": "Python", "typeref": "typename:Optional[datetime]", "kind": "variable", "scope": "SessionOut", "scopeKind": "class"}, {"_type": "tag", "name": "game", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    game = relationship(\"Game\", back_populates=\"moves\")$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "game_detail", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def game_detail($/", "language": "Python", "kind": "function", "signature": "( game_id: int, db: OrmSession = Depends(get_db), )"}, {"_type": "tag", "name": "game_id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    game_id = Column(Integer, ForeignKey(\"games.id\", ondelete=\"CASCADE\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "game_state", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    game_state = Column(String(32), nullable=False, default=\"in_progress\")$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "games_as_o", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    games_as_o = relationship(\"Game\", back_populates=\"player_o\", foreign_keys=\"Game.player_o_id\"/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "games_as_x", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    games_as_x = relationship(\"Game\", back_populates=\"player_x\", foreign_keys=\"Game.player_x_id\"/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "get_board_state", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def get_board_state(moves: List[Move]) -> List[Optional[str]]:$/", "language": "Python", "typeref": "typename:List[Optional[str]]", "kind": "function", "signature": "(moves: List[Move])"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def get_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_game_state", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def get_game_state($/", "language": "Python", "kind": "function", "signature": "( game_id: int, db: OrmSession = Depends(get_db), )"}, {"_type": "tag", "name": "get_me", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def get_me($/", "language": "Python", "kind": "function", "signature": "( db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )"}, {"_type": "tag", "name": "get_password_hash", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def get_password_hash(password):$/", "language": "Python", "kind": "function", "signature": "(password)"}, {"_type": "tag", "name": "get_user_from_session_token", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def get_user_from_session_token($/", "language": "Python", "kind": "function", "signature": "( db: OrmSession, session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Session", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "join_game", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def join_game($/", "language": "Python", "kind": "function", "signature": "( join_req: JoinGameIn, db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )"}, {"_type": "tag", "name": "list_games", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def list_games($/", "language": "Python", "kind": "function", "signature": "( only_open: Optional[bool] = False, only_mine: Optional[bool] = False, db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def login($/", "language": "Python", "kind": "function", "signature": "( form_data: OAuth2PasswordRequestForm = Depends(), response: Response = None, db: OrmSession = Depends(get_db) )"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def logout($/", "language": "Python", "kind": "function", "signature": "( db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), response: Response = None, )"}, {"_type": "tag", "name": "make_move", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def make_move($/", "language": "Python", "kind": "function", "signature": "( game_id: int, move: MoveIn, db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )"}, {"_type": "tag", "name": "make_move_and_notify", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def make_move_and_notify($/", "language": "Python", "kind": "function", "signature": "( game_id: int, move: MoveIn, background_tasks: BackgroundTasks, db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )"}, {"_type": "tag", "name": "move_history", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def move_history($/", "language": "Python", "kind": "function", "signature": "( game_id: int, db: OrmSession = Depends(get_db), )"}, {"_type": "tag", "name": "move_number", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    move_number = Column(Integer, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "moves", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    moves = relationship(\"Move\", back_populates=\"game\")$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "moves", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    moves = relationship(\"Move\", back_populates=\"player\")$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def on_startup():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "orm_mode", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^        orm_mode = True$/", "language": "Python", "kind": "variable", "scope": "GameOut.Config", "scopeKind": "class"}, {"_type": "tag", "name": "orm_mode", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^        orm_mode = True$/", "language": "Python", "kind": "variable", "scope": "MoveOut.Config", "scopeKind": "class"}, {"_type": "tag", "name": "orm_mode", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^        orm_mode = True$/", "language": "Python", "kind": "variable", "scope": "UserOut.Config", "scopeKind": "class"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    password: str = Field(..., description=\"Password\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UserCreate", "scopeKind": "class"}, {"_type": "tag", "name": "password_hash", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    password_hash = Column(String(255), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "player", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    player = relationship(\"User\", back_populates=\"moves\")$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "player_id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    player_id = Column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "player_marker", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def player_marker(game: Game, user: User):$/", "language": "Python", "kind": "function", "signature": "(game: Game, user: User)"}, {"_type": "tag", "name": "player_o", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    player_o = relationship(\"User\", foreign_keys=[player_o_id], back_populates=\"games_as_o\")$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "player_o_id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    player_o_id = Column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), nullable=True)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "player_x", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    player_x = relationship(\"User\", foreign_keys=[player_x_id], back_populates=\"games_as_x\")$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "player_x_id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    player_x_id = Column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "position", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    position = Column(Integer, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "position", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    position: int = Field(..., ge=0, le=8)$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "MoveIn", "scopeKind": "class"}, {"_type": "tag", "name": "pwd_context", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def register(user: UserCreate, db: OrmSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(user: UserCreate, db: OrmSession = Depends(get_db))"}, {"_type": "tag", "name": "session_token", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    session_token = Column(String(255), unique=True, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Session", "scopeKind": "class"}, {"_type": "tag", "name": "sessions", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    sessions = relationship(\"Session\", back_populates=\"user\")$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "start_game", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def start_game($/", "language": "Python", "kind": "function", "signature": "( db: OrmSession = Depends(get_db), session_token: Optional[str] = Cookie(default=None), x_session_token: Optional[str] = Header(default=None), )"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    timestamp = Column(DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    updated_at = Column(DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    user = relationship(\"User\", back_populates=\"sessions\")$/", "language": "Python", "kind": "variable", "scope": "Session", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    user_id = Column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Session", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    username = Column(VARCHAR(50), unique=True, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^    username: str = Field(..., description=\"Username\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UserBase", "scopeKind": "class"}, {"_type": "tag", "name": "verify_password", "path": "/home/kavia/workspace/code-generation/multiplayer-tic-tac-toe-90ae4ea1/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def verify_password(plain, hashed):$/", "language": "Python", "kind": "function", "signature": "(plain, hashed)"}], "hash": "7d805eec0bde8322cbd9ae40116343fb", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/api/main.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = os.getenv(\"DATABASE_URL\", \"sqlite:\\/\\/\\/.\\/test.db\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__table_args__ = (", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"games\"", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"moves\"", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"sessions\"", "scope": "Session", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "created_at = Column(DateTime, default=datetime.utcnow)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "current_turn = Column(CHAR(1), nullable=False)  # 'X' or 'O'", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "expires_at = Column(DateTime, nullable=True)", "scope": "Session", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[datetime] expires_at", "scope": "SessionOut", "scopeKind": "class", "description": "unavailable"}, {"name": "game = relationship(\"Game\", back_populates=\"moves\")", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "game_id = Column(Integer, ForeignKey(\"games.id\", ondelete=\"CASCADE\"), nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "game_state = Column(String(32), nullable=False, default=\"in_progress\")", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "games_as_o = relationship(\"Game\", back_populates=\"player_o\", foreign_keys=\"Game.player_o_id\"/", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "games_as_x = relationship(\"Game\", back_populates=\"player_x\", foreign_keys=\"Game.player_x_id\"/", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, index=True)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "move_number = Column(Integer, nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "moves = relationship(\"Move\", back_populates=\"game\")", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "moves = relationship(\"Move\", back_populates=\"player\")", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "orm_mode = True", "scope": "GameOut.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "str password", "scope": "UserCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "password_hash = Column(String(255), nullable=False)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "player = relationship(\"User\", back_populates=\"moves\")", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "player_id = Column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "player_o = relationship(\"User\", foreign_keys=[player_o_id], back_populates=\"games_as_o\")", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "player_o_id = Column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), nullable=True)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "player_x = relationship(\"User\", foreign_keys=[player_x_id], back_populates=\"games_as_x\")", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "player_x_id = Column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), nullable=False)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "position = Column(Integer, nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "int position", "scope": "MoveIn", "scopeKind": "class", "description": "unavailable"}, {"name": "pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "session_token = Column(String(255), unique=True, nullable=False)", "scope": "Session", "scopeKind": "class", "description": "unavailable"}, {"name": "sessions = relationship(\"Session\", back_populates=\"user\")", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "timestamp = Column(DateTime, default=datetime.utcnow)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at = Column(DateTime, default=datetime.utcnow)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "user = relationship(\"User\", back_populates=\"sessions\")", "scope": "Session", "scopeKind": "class", "description": "unavailable"}, {"name": "user_id = Column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), nullable=False)", "scope": "Session", "scopeKind": "class", "description": "unavailable"}, {"name": "username = Column(VARCHAR(50), unique=True, nullable=False)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "str username", "scope": "UserBase", "scopeKind": "class", "description": "unavailable"}]}